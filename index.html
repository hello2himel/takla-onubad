<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Takla Onubad</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- API Key Modal -->
    <div id="setupModal" class="modal">
        <div class="modal-box">
            <h2>API Configuration</h2>
            
            <div class="field">
                <label>OpenRouter API Key</label>
                <input type="password" id="apiKey" placeholder="Enter OpenRouter API key">
            </div>

            <div class="field">
    <label>Model</label>
    <select id="modelSelect">
        <!-- Default -->
        <option value="meta-llama/llama-3.3-70b-instruct:free" selected>Llama 3.3 70B Instruct (Free, Default)</option>

        <!-- Free Models -->
        <option value="qwen/qwen3-next-80b-a3b-instruct:free">Qwen3 Next 80B A3B Instruct (Free)</option>
        <option value="arcee-ai/trinity-mini:free">Trinity Mini (Free)</option>
        <option value="google/gemma-3n-e2b-it:free">Gemma 3n E2B Instruct (Free)</option>

        <!-- Paid Models -->
        <option value="anthropic/claude-3.7-sonnet">Claude 3.7 Sonnet (Paid)</option>
        <option value="openai/gpt-4o">GPT-4o (Paid)</option>
        <option value="google/gemini-2.5-pro">Gemini 2.5 Pro (Paid)</option>

        <!-- Custom -->
        <option value="custom">Custom Model</option>
    </select>

    <input type="text" id="customModel" placeholder="model/name" style="display: none;">
</div>


            <label class="checkbox">
                <input type="checkbox" id="storeLocal" checked>
                <span>Store locally on this device</span>
            </label>

            <p class="helper">Keys never pass through a server.</p>

            <div id="testStatus" class="status"></div>

            <div class="modal-actions">
                <button id="testKeyBtn" class="btn-ghost">Test Connection</button>
                <button id="saveKeyBtn" class="btn-primary" disabled>Save Key</button>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <div class="logo">Takla Onubad</div>
                <div class="header-actions">
                    <button id="themeToggle" class="icon-btn" aria-label="Toggle theme">
                        <svg class="theme-icon sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                        </svg>
                        <svg class="theme-icon moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </button>
                    <button id="settingsBtn" class="icon-btn" aria-label="Settings">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6m9-9h-6m-6 0H3"/>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Model Status -->
        <div class="model-status">
            <div class="container">
                <span>Model: <span id="currentModel">Trinity Large 400B</span></span>
                <span class="separator">|</span>
                <a href="https://openrouter.ai/docs" target="_blank" rel="noopener">via OpenRouter</a>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main">
            <div class="container">
                <div class="translator">
                    <!-- Input Panel -->
                    <div class="panel">
                        <div class="panel-label">Takla (Phonetic Bangla)</div>
                        <textarea 
                            id="taklaBanglaInput" 
                            placeholder="Type or paste distorted Bangla written in English letters…"
                            spellcheck="false"
                        ></textarea>
                        <div class="panel-toolbar">
                            <div class="toolbar-left">
                                <span id="charCount" class="meta">0 chars</span>
                            </div>
                            <div class="toolbar-right">
                                <button id="clearInputBtn" class="btn-ghost-sm">Clear</button>
                                <button id="translateBtn" class="btn-primary-sm">Translate</button>
                            </div>
                        </div>
                    </div>

                    <!-- Output Panel -->
                    <div class="panel">
                        <div class="panel-label">বাংলা</div>
                        <div id="bengaliOutput" class="output" contenteditable="false"></div>
                        <div class="panel-toolbar">
                            <div class="toolbar-left">
                                <span id="estimatedCost" class="meta"></span>
                            </div>
                            <div class="toolbar-right">
                                <button id="selectAllBtn" class="btn-ghost-sm" disabled>Select All</button>
                                <button id="copyBtn" class="btn-ghost-sm" disabled>Copy</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Settings -->
                <details class="settings-panel">
                    <summary>Advanced Options</summary>
                    <div class="settings-content">
                        <div class="setting-row">
                            <label>Temperature <span id="tempValue">0.2</span></label>
                            <input type="range" id="tempSlider" min="0" max="0.5" step="0.05" value="0.2">
                        </div>
                        <div class="setting-row">
                            <label class="checkbox">
                                <input type="checkbox" id="streamToggle" checked>
                                <span>Enable streaming</span>
                            </label>
                        </div>
                        <div class="setting-row">
                            <label class="checkbox">
                                <input type="checkbox" id="safetyToggle" checked>
                                <span>Content safety filter</span>
                            </label>
                        </div>
                    </div>
                </details>
            </div>
        </main>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingIndicator" class="loading" style="display: none;">
        <div class="spinner"></div>
    </div>

    <!-- Toast -->
    <div id="statusBar" class="toast"></div>

    <script type="module" src="app.js"></script>
</body>
</html>
